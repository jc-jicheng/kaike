<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <link rel="stylesheet" href="./index.css">
</head>

<body>
    <div id="box">
        <div id="content">
            目前主要针对的是javascript培训，同时还提供了css教程、javascript视频、js特效等，最新推出了外地学员们喜欢的javascript网络课程服务，同时还为处于javascript入门阶段的朋友录制了大量javascript视频，其中涉及了大量javascript基础知识，希望妙味课堂推出的javascript网络培训课程能带给大家更多惊喜。目前主要针对的是javascript培训，同时还提供了css教程、javascript视频、js特效等，最新推出了外地学员们喜欢的javascript网络课程服务，同时还为处于javascript入门阶段的朋友录制了大量javascript视频，其中涉及了大量javascript基础知识，希望妙味课堂推出的javascript网络培训课程能带给大家更多惊喜。目前主要针对的是javascript培训，
        </div>
        <div id="open">
            <a href="javascript:;">展开</a>
            <ul style="display: none;">
                <li><a href="javascript:;">查找</a></li>
                <li><a href="javascript:;">替换</a></li>
            </ul>
        </div>
        <div id="fun" style="display: none;">
            <div class="btns">
                <a href="javascript:;" class="active">查找</a>
                <a href="javascript:;">替换</a>
            </div>

            <div id="search" style="display: block;">
                <input type="text" />
                <input type="button" value="" />
            </div>
            <div id="replace">
                <input type="text" />
                <input type="text" />
                <input type="button" value="" />
            </div>
        </div>

    </div>
    <script type="text/javascript">
        // 1. 点击展开按钮 显示对应的查找和替换按钮
        var open=document.querySelector('#open');
        var openA=open.querySelector('a');
        var openUl=open.querySelector('ul');
        var openUlAs=openUl.querySelectorAll('a');
        var fun=document.querySelector('#fun');
        var search=document.querySelector('#search');
        var replace=document.querySelector('#replace');
        var btns=document.querySelectorAll('.btns a');
        var searInp=search.querySelectorAll('input');
        var repInp=replace.querySelectorAll('input');
        var content=document.querySelector('#content');
        var oldHTML=content.innerHTML;


        openA.onclick=function(){
            if(this.onOff){
                openUl.style.display='none'; 
            }else{
                openUl.style.display='block'; 
            }
            this.onOff=!this.onOff;
        }

        function searchShow(){
            fun.style.display='block';
            replace.style.display='none';
            search.style.display='block';
        }
        
        function replaceShow(){
            fun.style.display='block';
            replace.style.display='block';
            search.style.display='none';
        }
        // 查找
        openUlAs[0].onclick=function(){
            searchShow();
            openA.onclick();
        }

         // 替换
         openUlAs[1].onclick=function(){
            replaceShow();
            openA.onclick();
        }

        btns[0].onclick=searchShow;
        btns[1].onclick=replaceShow;

        // 查找按钮点击
        searInp[1].onclick=function(){

            // 清除上一次查找结果
            content.innerHTML=oldHTML;

            var val=searInp[0].value;
            var html=content.innerHTML;

            // split()
            // 将一个字符串，以传递的字符为分割，转成数组
            var arr=html.split(val);
            // join() 
            // 将一个数组，以传的值为链接符，连接成一串字符
            var str=arr.join('<span>'+val+'</span>')

            console.log(str);

            content.innerHTML=str;

            // console.log(val);
        }

        // 替换点击事件
        repInp[2].onclick=function(){
            var val1=repInp[0].value;
            var val2=repInp[1].value;
            var html=content.innerHTML;
            var str='';

            if(val1 == ''){
                alert('请输入要替换的内容');
                return;
            }
            
            if(html.indexOf(val1)==-1){
                alert('没有找到您想替换的内容');
                return;
            }

            if(val2=='' && html.indexOf(val1)!=-1){
                if(confirm('确定删除'+val1+'?')){
                    content.innerHTML=html.split(val1).join('');
                }
                return;
            }

            content.innerHTML=html.split(val1).join(val2);


        }


    </script>
</body>

</html>
